<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>OpenContactRecord</name>
        <label>OpenContactRecord</label>
        <locationX>2339</locationX>
        <locationY>3482</locationY>
        <actionName>c:NF_OpenRecordSubTab</actionName>
        <actionType>component</actionType>
        <connector>
            <targetReference>Assign_Contact_from_Selected_Contact</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>bringTabToFocus</name>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recordType</name>
            <value>
                <stringValue>Contact</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>selectedContactId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>voiceCallRecordId</name>
            <value>
                <elementReference>voiceCallRecordId</elementReference>
            </value>
        </inputParameters>
        <nameSegment>c:NF_OpenRecordSubTab</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Search_Records_by_ANI</name>
        <label>Search Records by ANI</label>
        <locationX>1168</locationX>
        <locationY>566</locationY>
        <actionName>NF_PhoneSearchAction</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Assign_Record_List_Length</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__output</typeName>
            <typeValue>Contact</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>phoneNumber</name>
            <value>
                <elementReference>CallerPhoneNumber</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>commaSeparatedFieldAPINames</name>
            <value>
                <stringValue>Name, AccountId,Phone,Email,MailingAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectAPIName</name>
            <value>
                <stringValue>Contact</stringValue>
            </value>
        </inputParameters>
        <nameSegment>NF_PhoneSearchAction</nameSegment>
        <outputParameters>
            <assignToReference>searchedContacts</assignToReference>
            <name>output</name>
        </outputParameters>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>59.0</apiVersion>
    <assignments>
        <name>Assign_Case_and_Contact</name>
        <label>Assign Case and Contact</label>
        <locationX>2906</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>Get_Voice_Call_Details.NF_Case_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.RelatedRecordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_Voice_Call_Details.NF_Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Case_Fields.ContactId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_Voice_Call_Details.NF_Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Case_Fields.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Voice_Call</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Contact_from_Create_Contact</name>
        <label>Assign Contact from Create Contact</label>
        <locationX>666</locationX>
        <locationY>2294</locationY>
        <assignmentItems>
            <assignToReference>selectedContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_New_Contact_Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>selectedContactName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_New_Contact_Record.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>selectedAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_New_Contact_Record.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Decision_Contact_Created</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Contact_from_Selected_Contact</name>
        <label>Assign Contact from Selected Contact</label>
        <locationX>2339</locationX>
        <locationY>3590</locationY>
        <assignmentItems>
            <assignToReference>selectedContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Selected_Contact_Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>selectedContactName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Selected_Contact_Record.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>selectedAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Selected_Contact_Record.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Voice_Call_with_Contact_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Record_List_Length</name>
        <label>Assign Record List Length</label>
        <locationX>1168</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>RecordListLength</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>searchedContacts</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Contact_List_Length</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Single_Contact</name>
        <label>Assign Single Contact</label>
        <locationX>1986</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>selectedContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Contacts.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_Selected_Contact_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Get_Callback_Phone_Number</name>
        <label>Get Callback Phone Number</label>
        <locationX>2378</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>CallerPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.PreviousCall.FromPhoneNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AgentUserId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Search_Records_by_ANI</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Get_Caller_Phone_Number</name>
        <label>Get Caller Phone Number</label>
        <locationX>1168</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>CallerPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.FromPhoneNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AgentUserId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Search_Records_by_ANI</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Get_Caller_Phone_Number_0</name>
        <label>Get Caller Phone Number</label>
        <locationX>2906</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>CallerPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.ToPhoneNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AgentUserId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Related_Record_Contact</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Get_Related_Record</name>
        <label>Get Related Record</label>
        <locationX>2642</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>selectedContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.RelatedRecordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Selected_Contact_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Selected_Contact_Record_0</name>
        <label>Selected Contact</label>
        <locationX>223</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>selectedContactName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_Datatable.outputSelectedRow.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>selectedContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_Datatable.outputSelectedRow.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_Voice_Call_Details.NF_Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_Datatable.outputSelectedRow.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>selectedAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_Datatable.outputSelectedRow.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Decision_Contact_Selected_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Selected_Contact_Record_0_0</name>
        <label>Selected Contact</label>
        <locationX>50</locationX>
        <locationY>1430</locationY>
        <assignmentItems>
            <assignToReference>selectedContactName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lookup_Contact.recordName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>selectedContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lookup_Contact.recordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_Voice_Call_Details.NF_Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lookup_Contact.recordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Selected_Contact_Record</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>BCO_Choice</name>
        <choiceText>BCO</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>B</stringValue>
        </value>
    </choices>
    <choices>
        <name>No</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </choices>
    <choices>
        <name>NVO_Choice</name>
        <choiceText>NVO</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>N</stringValue>
        </value>
    </choices>
    <choices>
        <name>Yes_0</name>
        <choiceText>Yes</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Yes</stringValue>
        </value>
    </choices>
    <decisions>
        <name>Call_Type</name>
        <label>Call Type</label>
        <locationX>2339</locationX>
        <locationY>242</locationY>
        <defaultConnector>
            <targetReference>Get_Caller_Phone_Number_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Outbound</defaultConnectorLabel>
        <rules>
            <name>Inbound</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_Voice_Call_Details.CallType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Inbound</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Voice_Call_Details.CallType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Callback</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Voice_Call_Details.CallType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Transfer</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Call_Type_0</targetReference>
            </connector>
            <label>Inbound/Callback</label>
        </rules>
    </decisions>
    <decisions>
        <name>Call_Type_0</name>
        <label>Call Type?</label>
        <locationX>1773</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Get_Callback_Phone_Number</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Callback</defaultConnectorLabel>
        <rules>
            <name>Inbound_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Voice_Call_Details.CallType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Inbound</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Caller_Phone_Number</targetReference>
            </connector>
            <label>Inbound</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Contact_List_Length</name>
        <label>Check Contact List Length</label>
        <locationX>1168</locationX>
        <locationY>782</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>No_Contact_Found_Screen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Records Found</defaultConnectorLabel>
        <rules>
            <name>More_than_1_Record</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RecordListLength</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Select_Contact_Screen</targetReference>
            </connector>
            <label>More than 1 Record Found</label>
        </rules>
        <rules>
            <name>Only_1_Record</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RecordListLength</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Contacts</targetReference>
            </connector>
            <label>Only 1 Record Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Contact_Created</name>
        <label>Contact Created?</label>
        <locationX>1095</locationX>
        <locationY>1538</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CreateContactYesNo</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Yes_0</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Contact</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Contact_Creation</name>
        <label>Contact Creation?</label>
        <locationX>974</locationX>
        <locationY>1970</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Create_Contact_First_Name</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Create_Contact_Last_Name</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Contact_Record</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>ContactExists</name>
        <label>ContactExists</label>
        <locationX>644</locationX>
        <locationY>1862</locationY>
        <defaultConnector>
            <targetReference>Contact_Creation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CheckEmailUniqueness</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ContactExistsMessageScreen</targetReference>
            </connector>
            <label>Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>Decision_Contact_Created</name>
        <label>Decision Contact Created</label>
        <locationX>666</locationX>
        <locationY>2402</locationY>
        <defaultConnector>
            <targetReference>Unable_to_Create_Contact</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Contact Created</defaultConnectorLabel>
        <rules>
            <name>Outcome_Contact_Created</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selectedContactId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>003</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Selected_Contact_Record</targetReference>
            </connector>
            <label>Contact Created</label>
        </rules>
    </decisions>
    <decisions>
        <name>Decision_Contact_Selected</name>
        <label>Decision Contact Selected</label>
        <locationX>572</locationX>
        <locationY>1322</locationY>
        <defaultConnector>
            <targetReference>CreateContactOption</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Contact Selected</defaultConnectorLabel>
        <rules>
            <name>Outcome_Contact_Selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lookup_Contact.recordId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>003</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Selected_Contact_Record_0_0</targetReference>
            </connector>
            <label>Contact Selected</label>
        </rules>
    </decisions>
    <decisions>
        <name>Decision_Contact_Selected_0</name>
        <label>Decision Contact Selected</label>
        <locationX>223</locationX>
        <locationY>1106</locationY>
        <defaultConnector>
            <targetReference>No_Contact_Found_Screen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Contact Selected</defaultConnectorLabel>
        <rules>
            <name>Outcome_Contact_Selected_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selectedContactId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>003</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Selected_Contact_Record</targetReference>
            </connector>
            <label>Contact Selected</label>
        </rules>
    </decisions>
    <decisions>
        <name>Related_Record_Contact</name>
        <label>Related Record Contact</label>
        <locationX>2906</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Search_Records_by_ANI</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Related_Record_Contact</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Voice_Call_Details.RelatedRecordId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>003</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Related_Record</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
        <rules>
            <name>Case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Voice_Call_Details.RelatedRecordId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>500</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Case_Fields</targetReference>
            </connector>
            <label>Case</label>
        </rules>
    </decisions>
    <dynamicChoiceSets>
        <name>RecordChoiceSet</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Account</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <interviewLabel>NeuraFlash - VoiceCall: Inbound &amp; Outbound {!$Flow.CurrentDateTime}</interviewLabel>
    <isAdditionalPermissionRequiredToRun>true</isAdditionalPermissionRequiredToRun>
    <label>NeuraFlash - VoiceCall: Inbound &amp; Outbound</label>
    <loops>
        <name>Loop_Contacts</name>
        <label>Loop Contacts</label>
        <locationX>1898</locationX>
        <locationY>890</locationY>
        <collectionReference>searchedContacts</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Single_Contact</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_Single_Contact</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Contact_Record</name>
        <label>Create Contact Record</label>
        <locationX>666</locationX>
        <locationY>2078</locationY>
        <connector>
            <targetReference>Get_New_Contact_Record</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Create_Contact</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>selectedAccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Email</field>
            <value>
                <elementReference>Create_Contact_Email</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FirstName</field>
            <value>
                <elementReference>Create_Contact_First_Name</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastName</field>
            <value>
                <elementReference>Create_Contact_Last_Name</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LeadSource</field>
            <value>
                <stringValue>CPC</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Phone</field>
            <value>
                <elementReference>Create_Contact_Business_Phone</elementReference>
            </value>
        </inputAssignments>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <description>Check if the Email already in the system</description>
        <name>CheckEmailUniqueness</name>
        <label>CheckEmailUniqueness</label>
        <locationX>644</locationX>
        <locationY>1754</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>ContactExists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Primary_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Create_Contact_Email</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Case_Fields</name>
        <label>Get Case Fields</label>
        <locationX>2906</locationX>
        <locationY>566</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Case_and_Contact</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.RelatedRecordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_New_Contact_Record</name>
        <label>Get New Contact Record</label>
        <locationX>666</locationX>
        <locationY>2186</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Contact_from_Create_Contact</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Create_Contact_Record</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Selected_Contact_Record</name>
        <label>Get Selected Contact Record</label>
        <locationX>2339</locationX>
        <locationY>3374</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>OpenContactRecord</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>selectedContactId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Voice_Call_Details</name>
        <label>Get Voice Call Details</label>
        <locationX>2339</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Call_Type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>voiceCallRecordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>VoiceCall</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Voice_Call</name>
        <label>Update Voice Call</label>
        <locationX>2906</locationX>
        <locationY>782</locationY>
        <inputReference>Get_Voice_Call_Details</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Voice_Call_with_Contact_Record</name>
        <label>Update Voice Call with Contact Record</label>
        <locationX>2339</locationX>
        <locationY>3698</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Voice_Call_Details.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>NF_Account__c</field>
            <value>
                <elementReference>selectedAccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NF_Case_Number__c</field>
            <value>
                <elementReference>selectedCaseId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NF_Contact__c</field>
            <value>
                <elementReference>selectedContactId</elementReference>
            </value>
        </inputAssignments>
        <object>VoiceCall</object>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>ContactExistsMessageScreen</name>
        <label>ContactExistsMessageScreen</label>
        <locationX>314</locationX>
        <locationY>1970</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>ContactExistsMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(124, 1, 1);&quot;&gt;The input email is already associated with an existing Contact record in the system. No need to create this new one. &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Click Finish&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Create_Contact</name>
        <label>Create Contact</label>
        <locationX>644</locationX>
        <locationY>1646</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>CheckEmailUniqueness</targetReference>
        </connector>
        <fields>
            <name>Create_Contact_Text</name>
            <fieldText>&lt;p&gt;Create a new &lt;b&gt;Contact&lt;/b&gt; using the fields below. When complete, click &lt;b&gt;Next&lt;/b&gt; to finish creating the &lt;b&gt;Contact&lt;/b&gt; record.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>AccountLookup</name>
            <extensionName>flowruntime:lookup</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>fieldApiName</name>
                <value>
                    <stringValue>AccountId</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectApiName</name>
                <value>
                    <stringValue>Contact</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Account Name</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>required</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>Create_Contact_First_Name</name>
            <dataType>String</dataType>
            <fieldText>First Name</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Create_Contact_Last_Name</name>
            <dataType>String</dataType>
            <fieldText>Last Name</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Create_Contact_Business_Phone</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>CallerPhoneNumber</elementReference>
            </defaultValue>
            <fieldText>Phone</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Create_Contact_Email</name>
            <dataType>String</dataType>
            <fieldText>Email</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>CreateContactOption</name>
        <label>CreateContactOption</label>
        <locationX>1095</locationX>
        <locationY>1430</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Contact_Created</targetReference>
        </connector>
        <fields>
            <name>ContactCreationQuestion</name>
            <fieldText>&lt;p&gt;Would you like to create a Contact for this Inbound call?  &lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Selecting &lt;strong&gt;Yes&lt;/strong&gt; will bring you to the Contact creation screen, &lt;strong&gt;No&lt;/strong&gt; will skip you ahead to the Case creation screen.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>CreateContactYesNo</name>
            <choiceReferences>Yes_0</choiceReferences>
            <choiceReferences>No</choiceReferences>
            <dataType>String</dataType>
            <fieldType>RadioButtons</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>No_Contact_Found_Screen</name>
        <label>No Contact Found Screen</label>
        <locationX>572</locationX>
        <locationY>1214</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Decision_Contact_Selected</targetReference>
        </connector>
        <fields>
            <name>No_Contact_Found</name>
            <fieldText>&lt;p&gt;No &lt;b&gt;Contact&lt;/b&gt; was found for phone number {!CallerPhoneNumber}. Use the &lt;b&gt;Lookup&lt;/b&gt; selection below to find a &lt;b&gt;Contact&lt;/b&gt; record or click &lt;b&gt;Next&lt;/b&gt; to start creating a new &lt;b&gt;Contact.&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Lookup_Contact</name>
            <extensionName>flowruntime:lookup</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>fieldApiName</name>
                <value>
                    <stringValue>NF_Contact__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Contact</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectApiName</name>
                <value>
                    <stringValue>VoiceCall</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Select_Contact_Screen</name>
        <label>Select Contact Screen</label>
        <locationX>223</locationX>
        <locationY>890</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Selected_Contact_Record_0</targetReference>
        </connector>
        <fields>
            <name>Select_Contact_Multiple</name>
            <fieldText>&lt;p&gt;Please select the appropriate &lt;b&gt;Contact&lt;/b&gt; from the table below or click &lt;b&gt;Next&lt;/b&gt; to &lt;b&gt;Lookup&lt;/b&gt; an existing &lt;b&gt;Contact &lt;/b&gt;record.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Contact_Datatable</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>Contact</typeValue>
            </dataTypeMappings>
            <extensionName>c:scvDatatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>searchedContacts</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnFields</name>
                <value>
                    <stringValue>Name, AccountId,Phone,Email,MailingAddress</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>singleRowSelection</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>suppressNameFieldLink</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Unable_to_Create_Contact</name>
        <label>Unable to Create Contact</label>
        <locationX>754</locationX>
        <locationY>2510</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Get_Selected_Contact_Record</targetReference>
        </connector>
        <fields>
            <name>Contact_Create_Failed</name>
            <fieldText>&lt;p&gt;We were unable to create a new &lt;b&gt;Contact&lt;/b&gt; using the information provided. Please try again.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>2213</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Voice_Call_Details</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>AgentUserId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>assigneeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Set to : [Lead, PersonAccount, Contact]</description>
        <name>CallerLookupRecordType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Contact</stringValue>
        </value>
    </variables>
    <variables>
        <name>CallerPhoneNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecordListLength</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>searchedContacts</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>selectedAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>selectedCaseId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>selectedContactId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>selectedContactName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>The Voice Call Record ID</description>
        <name>voiceCallRecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
